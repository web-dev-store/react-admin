{"version":3,"sources":["routes/routes.ts","pages/login/reducer.ts","redux/reducer.ts","utils/PageLoading.tsx","utils/Loadable.tsx","routes/index.tsx","pages/App.tsx","services/login.ts","pages/login/sagas.ts","request/index.ts","services/product.ts","pages/grid/sagas.ts","redux/sagas.ts","redux/store.ts","pwa/serviceWorker.ts","index.tsx","pages/login/constants.ts","pages/grid/constants.ts","routes/middlewares/loginMiddleware.tsx","routes/middlewares/authMiddleware.tsx","routes/getCheckRouteComponent.ts","components/ErrorBoundary/index.tsx","routes/CheckRoute.tsx"],"names":["routeConfig","path","key","name","menu","component","Loadable","login","routes","icon","HomeOutlined","exact","ShoppingOutlined","TableOutlined","FileAddOutlined","FormOutlined","authority","HeartOutlined","loginStateInit","isLogin","loading","userInfo","msg","remember","loginType","loginReducer","state","type","payload","persistConfig","storage","initRootState","lang","theme","globalReducer","Object","assign","createReducer","injectedReducers","rootReducer","combineReducers","global","user","persistReducer","PageLoading","useEffect","NProgress","start","done","loader","Routes","CheckRoute","RouteConfig","App","LoginService","loginInfo","console","log","Promise","resolve","reject","setTimeout","username","password","id","content","mobile","captcha","getMoreUserInfo","roles","logout","sendCaptcha","loginHandle","logoutHandle","loginSaga","action","put","REQUEST","call","loginRes","userInfoRes","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT_SUCCESS","LOGOUT_FAILURE","res","SEND_CAPTCHA_SUCCESS","SEND_CAPTCHA_FAILURE","takeEvery","LOGIN_SAGA","LOGOUT_SAGA","SEND_CAPTCHA","instance","axios","create","interceptors","request","use","config","error","response","url","query","params","a","method","queryProduct","gridPageSaga","queryParams","pagination","QUERY_PRODUCT_SUCCESS","products","data","total","pageSize","current","QUERY_PRODUCT_FAILURE","QUERY_PRODUCT_SAGA","rootSaga","all","sagaMiddleware","createSagaMiddleware","store","createStore","applyMiddleware","run","persistor","persistStore","Boolean","window","location","hostname","match","zh","zhCN","en","enUS","Root","useSelector","locale","ReactDOM","render","basename","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message","CLEAR_LOGIN_MESSAGE","loginMiddleware","next","currentRoute","to","pathname","from","authMiddleware","Array","isArray","includes","applyRouteMiddleware","middlewares","middlewaresChain","map","middleware","compose","checkSuccessComponent","funcs","length","arg","reduce","b","ErrorBoundary","hasError","errorInfo","this","props","errorShow","status","title","subTitle","extra","children","React","Component","restProps","RouteComponent"],"mappings":"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","file":"static/js/main.ebd395c7.chunk.js","sourcesContent":["/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport { RouteProps } from 'react-router-dom'\nimport {\n\tHomeOutlined,\n\tShoppingOutlined,\n\tTableOutlined,\n\tFileAddOutlined,\n\tFormOutlined,\n\tHeartOutlined\n} from '@ant-design/icons'\n\nimport Loadable from '../utils/Loadable'\n\nexport interface IRouteConfig extends RouteProps {\n\tkey: string\n\tlogin?: boolean\n\tauthority?: Array<string>\n\troutes?: Array<IRouteConfig>\n\tname: string\n\ticon?: React.ReactNode\n\tmenu: boolean\n}\n\nconst routeConfig: IRouteConfig = {\n\tpath: '/',\n\tkey: 'root',\n\tname: 'root',\n\tmenu: false,\n\tcomponent: Loadable(() =>\n\t\timport(/* webpackChunkName: 'layout' */ '../pages/layout')\n\t),\n\tlogin: true,\n\troutes: [\n\t\t{\n\t\t\tpath: '/welcome',\n\t\t\tkey: 'welcome',\n\t\t\tname: '首页',\n\t\t\ticon: HomeOutlined,\n\t\t\tmenu: true,\n\t\t\texact: true,\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'welcome' */ '../pages/welcome')\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tpath: '/dashboard',\n\t\t\tkey: 'dashboard',\n\t\t\tname: 'Dashboard',\n\t\t\ticon: ShoppingOutlined,\n\t\t\tmenu: true,\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'dashboard' */ '../pages/dashboard')\n\t\t\t),\n\t\t\troutes: [\n\t\t\t\t{\n\t\t\t\t\tpath: '/dashboard/a',\n\t\t\t\t\tkey: 'dashboard-a',\n\t\t\t\t\tname: 'dashboard-a',\n\t\t\t\t\ticon: ShoppingOutlined,\n\t\t\t\t\tmenu: true,\n\t\t\t\t\tcomponent: Loadable(() =>\n\t\t\t\t\t\timport(\n\t\t\t\t\t\t\t/* webpackChunkName: 'dashboard-a' */ '../pages/dashboard/dashboard-a'\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tpath: '/dashboard/b',\n\t\t\t\t\tkey: 'dashboard-b',\n\t\t\t\t\tname: 'dashboard-b',\n\t\t\t\t\ticon: ShoppingOutlined,\n\t\t\t\t\tmenu: true,\n\t\t\t\t\tcomponent: Loadable(() =>\n\t\t\t\t\t\timport(\n\t\t\t\t\t\t\t/* webpackChunkName: 'dashboard-b' */ '../pages/dashboard/dashboard-b'\n\t\t\t\t\t\t)\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tpath: '/form',\n\t\t\tkey: 'form',\n\t\t\tname: '表单',\n\t\t\ticon: TableOutlined,\n\t\t\tmenu: true,\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'form' */ '../pages/form')\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tpath: '/grid',\n\t\t\tkey: 'grid',\n\t\t\tname: '数据',\n\t\t\ticon: FileAddOutlined,\n\t\t\tmenu: true,\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'grid' */ '../pages/grid')\n\t\t\t),\n\t\t\troutes: [\n\t\t\t\t{\n\t\t\t\t\tpath: '/grid/info/:id',\n\t\t\t\t\tkey: 'grid-info',\n\t\t\t\t\tname: 'grid-info',\n\t\t\t\t\tmenu: false,\n\t\t\t\t\tcomponent: Loadable(() =>\n\t\t\t\t\t\timport(/* webpackChunkName: 'grid-info' */ '../pages/grid/info')\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\tpath: '/detail',\n\t\t\tkey: 'detail',\n\t\t\tname: '详情',\n\t\t\ticon: FormOutlined,\n\t\t\tmenu: true,\n\t\t\tauthority: ['user'],\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'detail' */ '../pages/detail')\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tpath: '/result',\n\t\t\tkey: 'result',\n\t\t\tname: '结果',\n\t\t\ticon: HeartOutlined,\n\t\t\tmenu: true,\n\t\t\tauthority: ['admin', 'user'],\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'result' */ '../pages/result')\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tpath: '/error',\n\t\t\tkey: 'error',\n\t\t\tname: '错误',\n\t\t\ticon: HeartOutlined,\n\t\t\tmenu: true,\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'error' */ '../pages/error')\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tpath: '/403',\n\t\t\tkey: 'error-403',\n\t\t\tname: '403',\n\t\t\tmenu: false,\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'error-403' */ '../pages/error/error-403')\n\t\t\t)\n\t\t},\n\t\t{\n\t\t\tkey: 'error-404',\n\t\t\tname: '404',\n\t\t\tmenu: false,\n\t\t\tcomponent: Loadable(() =>\n\t\t\t\timport(/* webpackChunkName: 'error-404' */ '../pages/error/error-404')\n\t\t\t)\n\t\t}\n\t]\n}\n\nexport default routeConfig\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport { IUserInfo } from '../../services/login'\n\nexport interface ILoginState {\n\tisLogin: boolean\n\tloading: boolean\n\tuserInfo: IUserInfo | null\n\tmsg: any\n\tremember: boolean\n\tloginType: string\n}\n\nconst loginStateInit: ILoginState = {\n\tisLogin: false,\n\tloading: false,\n\tuserInfo: null,\n\tmsg: null,\n\tremember: false,\n\tloginType: ''\n}\n\nconst loginReducer = (\n\tstate = { ...loginStateInit },\n\t{ type, payload }: any\n) => {\n\tswitch (type) {\n\t\tcase 'REQUEST':\n\t\t\treturn { ...state, loading: true }\n\t\tcase 'LOGIN_SUCCESS':\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tisLogin: true,\n\t\t\t\tloading: false,\n\t\t\t\tuserInfo: { ...payload.userInfo },\n\t\t\t\tmsg: null,\n\t\t\t\tremember: payload.remember,\n\t\t\t\tloginType: payload.loginType\n\t\t\t}\n\t\tcase 'LOGIN_FAILURE':\n\t\t\treturn { ...state, ...loginStateInit, ...payload }\n\t\tcase 'LOGOUT_SUCCESS':\n\t\t\treturn { ...loginStateInit }\n\t\tcase 'LOGOUT_FAILURE':\n\t\t\treturn { ...loginStateInit }\n\t\tcase 'CLEAR_LOGIN_MESSAGE':\n\t\t\treturn { ...state, msg: null }\n\t\tcase 'SEND_CAPTCHA_SUCCESS':\n\t\t\treturn { ...loginStateInit, ...payload }\n\t\tcase 'SEND_CAPTCHA_FAILURE':\n\t\t\treturn { ...loginStateInit, ...payload }\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default loginReducer\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport { combineReducers } from 'redux'\nimport { persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\n\nimport loginReducer from '../pages/login/reducer'\n\nconst persistConfig = {\n\tkey: 'root',\n\tstorage\n}\n\nexport interface IRootState {\n\tlang: string\n\ttheme: string\n}\n\nconst initRootState: IRootState = {\n\tlang: 'zh',\n\ttheme: 'default'\n}\n\nfunction globalReducer(state = initRootState, { type, payload }: any) {\n\tswitch (type) {\n\t\tcase 'CHANGE_LANG':\n\t\t\treturn Object.assign({}, state, { lang: payload })\n\t\tdefault:\n\t\t\treturn state\n\t}\n}\n\nexport default function createReducer(injectedReducers?: any) {\n\tconst rootReducer = combineReducers({\n\t\tglobal: globalReducer,\n\t\tuser: loginReducer,\n\t\t...injectedReducers\n\t})\n\n\tconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\treturn persistedReducer\n}\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport React, { useEffect } from 'react'\nimport NProgress from 'nprogress'\nimport 'nprogress/nprogress.css'\n\nconst PageLoading: React.FC = () => {\n\tuseEffect(() => {\n\t\tNProgress.start()\n\t\treturn () => {\n\t\t\tNProgress.done()\n\t\t}\n\t}, [])\n\treturn null\n}\n\nexport default PageLoading\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport Loadable from 'react-loadable'\n\nimport PageLoading from './PageLoading'\n\nexport default (loader: any, loading = PageLoading) => {\n\treturn Loadable({\n\t\tloader,\n\t\tloading\n\t})\n}\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport React from 'react'\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom'\n\nimport Loadable from '../utils/Loadable'\nimport RouteConfig from './routes'\nimport CheckRoute from './CheckRoute'\n\nconst Routes: React.FC = () => {\n\treturn (\n\t\t<Router>\n\t\t\t<Switch>\n\t\t\t\t<Route\n\t\t\t\t\texact\n\t\t\t\t\tpath=\"/login\"\n\t\t\t\t\tcomponent={Loadable(() =>\n\t\t\t\t\t\timport(/* webpackChunkName: 'login' */ '../pages/login')\n\t\t\t\t\t)}\n\t\t\t\t/>\n\n\t\t\t\t<CheckRoute {...RouteConfig} />\n\t\t\t</Switch>\n\t\t</Router>\n\t)\n}\n\nexport default Routes\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport React from 'react'\n\nimport Routes from '../routes'\n\nconst App: React.FC = () => {\n\treturn <Routes />\n}\n\nexport default App\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nexport interface ILoginInfo {\n\tusername: string\n\tpassword: string\n\tmobile: string\n\tcaptcha: string\n\tremember: boolean\n\tloginType: string\n}\n\nexport interface IUserInfo {\n\tid: number\n\tusername: string\n\troles: Array<string>\n}\n\nconst LoginService = {\n\tlogin(loginInfo: ILoginInfo) {\n\t\tconsole.log('loginInfo ----- ', loginInfo)\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (loginInfo.loginType === 'account') {\n\t\t\t\t\tif (\n\t\t\t\t\t\tloginInfo.username === 'admin' &&\n\t\t\t\t\t\tloginInfo.password === '123456'\n\t\t\t\t\t) {\n\t\t\t\t\t\tresolve({ id: 123, username: 'admin' })\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject({ msg: { type: 'error', content: '用户名或密码错误' } })\n\t\t\t\t\t}\n\t\t\t\t} else if (loginInfo.loginType === 'mobile') {\n\t\t\t\t\tif (\n\t\t\t\t\t\tloginInfo.mobile === '13112341234' &&\n\t\t\t\t\t\tloginInfo.captcha === '1234'\n\t\t\t\t\t) {\n\t\t\t\t\t\tresolve({ id: 123, username: 'admin' })\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject({ msg: { type: 'error', content: '手机号码验证失败' } })\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t})\n\t},\n\tgetMoreUserInfo(userInfo: IUserInfo) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (userInfo.id === 123) {\n\t\t\t\t\tresolve({ ...userInfo, roles: ['admin'] })\n\t\t\t\t} else {\n\t\t\t\t\treject({ msg: { type: 'error', content: '获取登录用户信息失败' } })\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t})\n\t},\n\tlogout(userInfo: IUserInfo) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tresolve()\n\t\t\t}, 1000)\n\t\t})\n\t},\n\tsendCaptcha(mobile: string) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (mobile === '13112341234') {\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tmsg: { type: 'success', content: '获取验证码成功！验证码为：1234' }\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\treject({ msg: { type: 'error', content: '获取验证码失败' } })\n\t\t\t\t}\n\t\t\t}, 1000)\n\t\t})\n\t}\n}\n\nexport default LoginService\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport { call, put, takeEvery } from 'redux-saga/effects'\n\nimport {\n\tLOGIN_SAGA,\n\tLOGOUT_SAGA,\n\tREQUEST,\n\tLOGIN_SUCCESS,\n\tLOGIN_FAILURE,\n\tLOGOUT_SUCCESS,\n\tLOGOUT_FAILURE,\n\tSEND_CAPTCHA,\n\tSEND_CAPTCHA_SUCCESS,\n\tSEND_CAPTCHA_FAILURE\n} from './constants'\nimport LoginService from '../../services/login'\n\nfunction* loginHandle(action: any) {\n\tyield put({\n\t\ttype: REQUEST\n\t})\n\ttry {\n\t\tconst loginRes = yield call(LoginService.login, action.payload)\n\t\tconst userInfoRes = yield call(LoginService.getMoreUserInfo, loginRes)\n\t\tyield put({\n\t\t\ttype: LOGIN_SUCCESS,\n\t\t\tpayload: {\n\t\t\t\tuserInfo: userInfoRes,\n\t\t\t\tremember: action.payload.remember,\n\t\t\t\tloginType: action.payload.loginType\n\t\t\t}\n\t\t})\n\t} catch (error) {\n\t\tyield put({\n\t\t\ttype: LOGIN_FAILURE,\n\t\t\tpayload: error\n\t\t})\n\t}\n}\n\nfunction* logoutHandle(action: any) {\n\tyield put({\n\t\ttype: REQUEST\n\t})\n\ttry {\n\t\tyield call(LoginService.logout, action.payload.userInfo)\n\t\tyield put({\n\t\t\ttype: LOGOUT_SUCCESS\n\t\t})\n\t} catch (error) {\n\t\tyield put({\n\t\t\ttype: LOGOUT_FAILURE\n\t\t})\n\t}\n}\n\nfunction* sendCaptcha(action: any) {\n\tyield put({\n\t\ttype: REQUEST\n\t})\n\ttry {\n\t\tconst res = yield call(LoginService.sendCaptcha, action.payload)\n\t\tyield put({\n\t\t\ttype: SEND_CAPTCHA_SUCCESS,\n\t\t\tpayload: res\n\t\t})\n\t} catch (error) {\n\t\tyield put({\n\t\t\ttype: SEND_CAPTCHA_FAILURE,\n\t\t\tpayload: error\n\t\t})\n\t}\n}\n\nfunction* loginSaga() {\n\tyield takeEvery(LOGIN_SAGA, loginHandle)\n\tyield takeEvery(LOGOUT_SAGA, logoutHandle)\n\tyield takeEvery(SEND_CAPTCHA, sendCaptcha)\n}\n\nexport default loginSaga\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport axios from 'axios'\n\nconst instance = axios.create({})\n\nconst request = (url: string, config: any) => {\n\treturn instance.request({ url, ...config })\n}\n\ninstance.interceptors.request.use(\n\t(config) => {\n\t\tconsole.log('---------- do something before request ----------')\n\t\treturn config\n\t},\n\t(error) => {\n\t\tconsole.log('---------- do something by request error ----------')\n\t\treturn Promise.reject(error)\n\t}\n)\n\ninstance.interceptors.response.use(\n\t(response) => {\n\t\tconsole.log('---------- do something by response ----------')\n\t\treturn response\n\t},\n\t(error) => {\n\t\tconsole.log('---------- do something by response error ----------')\n\t\treturn Promise.reject(error)\n\t}\n)\n\nexport default request\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport request from '../request'\n\nexport interface IProduct {\n\tid: string\n\tname: string\n\ttype: string\n\tcount: number\n\tcreateTime: string\n\tuser: string\n}\n\nexport interface IQueryProductParams {\n\tname?: string\n\ttype?: string\n\tcount?: number\n\tcountry?: string\n\tisHot?: boolean\n\tbeginTime?: string\n\tendTime?: string\n\tuser?: string\n\tcurrent: number\n\tpageSize: number\n}\n\nexport async function query(params: IQueryProductParams) {\n\treturn await request('http://localhost:3001/products', {\n\t\tmethod: 'get'\n\t})\n}\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport { takeEvery, put, call } from 'redux-saga/effects'\nimport {\n\tQUERY_PRODUCT_SAGA,\n\tREQUEST,\n\tQUERY_PRODUCT_SUCCESS,\n\tQUERY_PRODUCT_FAILURE\n} from './constants'\nimport { query } from '../../services/product'\n\nfunction* queryProduct({ payload }: any) {\n\tyield put({\n\t\ttype: REQUEST\n\t})\n\ttry {\n\t\tconst res = yield call(query, {\n\t\t\t...payload.queryParams,\n\t\t\t...payload.pagination\n\t\t})\n\t\tyield put({\n\t\t\ttype: QUERY_PRODUCT_SUCCESS,\n\t\t\tpayload: {\n\t\t\t\tproducts: res.data.products,\n\t\t\t\tqueryParams: payload.queryParams || {},\n\t\t\t\tpagination: {\n\t\t\t\t\ttotal: res.data.total,\n\t\t\t\t\tpageSize: payload.pagination.pageSize,\n\t\t\t\t\tcurrent: payload.pagination.current || 1\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t} catch (error) {\n\t\tyield put({\n\t\t\ttype: QUERY_PRODUCT_FAILURE\n\t\t})\n\t}\n}\n\nfunction* gridPageSaga() {\n\tyield takeEvery(QUERY_PRODUCT_SAGA, queryProduct)\n}\n\nexport default gridPageSaga\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport { all } from 'redux-saga/effects'\nimport loginSaga from '../pages/login/sagas'\nimport gridPageSaga from '../pages/grid/sagas'\n\nexport default function* rootSaga() {\n\tyield all([loginSaga(), gridPageSaga()])\n}\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport { createStore, applyMiddleware, Store } from 'redux'\nimport createSagaMiddleware from 'redux-saga'\nimport { persistStore } from 'redux-persist'\n\nimport createReducer from './reducer'\nimport rootSaga from './sagas'\n\ninterface IStore extends Store {\n\tinjectedReducers?: any\n}\n\nconst sagaMiddleware = createSagaMiddleware()\n\nconst store: IStore = createStore(\n\tcreateReducer(),\n\tapplyMiddleware(sagaMiddleware)\n)\n\nsagaMiddleware.run(rootSaga)\n\nstore.injectedReducers = {} // Reducer registry\n\nexport const persistor = persistStore(store)\n\nexport default store\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n\twindow.location.hostname === 'localhost' ||\n\t\t// [::1] is the IPv6 localhost address.\n\t\twindow.location.hostname === '[::1]' ||\n\t\t// 127.0.0.0/8 are considered localhost for IPv4.\n\t\twindow.location.hostname.match(\n\t\t\t/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n\t\t)\n)\n\ntype Config = {\n\tonSuccess?: (registration: ServiceWorkerRegistration) => void\n\tonUpdate?: (registration: ServiceWorkerRegistration) => void\n}\n\nexport function register(config?: Config) {\n\tif (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n\t\t// The URL constructor is available in all browsers that support SW.\n\t\tconst publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n\t\tif (publicUrl.origin !== window.location.origin) {\n\t\t\t// Our service worker won't work if PUBLIC_URL is on a different origin\n\t\t\t// from what our page is served on. This might happen if a CDN is used to\n\t\t\t// serve assets; see https://github.com/facebook/create-react-app/issues/2374\n\t\t\treturn\n\t\t}\n\n\t\twindow.addEventListener('load', () => {\n\t\t\tconst swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n\t\t\tif (isLocalhost) {\n\t\t\t\t// This is running on localhost. Let's check if a service worker still exists or not.\n\t\t\t\tcheckValidServiceWorker(swUrl, config)\n\n\t\t\t\t// Add some additional logging to localhost, pointing developers to the\n\t\t\t\t// service worker/PWA documentation.\n\t\t\t\tnavigator.serviceWorker.ready.then(() => {\n\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t'This web app is being served cache-first by a service ' +\n\t\t\t\t\t\t\t'worker. To learn more, visit https://bit.ly/CRA-PWA'\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Is not localhost. Just register service worker\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t}\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n\tnavigator.serviceWorker\n\t\t.register(swUrl)\n\t\t.then((registration) => {\n\t\t\tregistration.onupdatefound = () => {\n\t\t\t\tconst installingWorker = registration.installing\n\t\t\t\tif (installingWorker == null) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tinstallingWorker.onstatechange = () => {\n\t\t\t\t\tif (installingWorker.state === 'installed') {\n\t\t\t\t\t\tif (navigator.serviceWorker.controller) {\n\t\t\t\t\t\t\t// At this point, the updated precached content has been fetched,\n\t\t\t\t\t\t\t// but the previous service worker will still serve the older\n\t\t\t\t\t\t\t// content until all client tabs are closed.\n\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t'New content is available and will be used when all ' +\n\t\t\t\t\t\t\t\t\t'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onUpdate) {\n\t\t\t\t\t\t\t\tconfig.onUpdate(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// At this point, everything has been precached.\n\t\t\t\t\t\t\t// It's the perfect time to display a\n\t\t\t\t\t\t\t// \"Content is cached for offline use.\" message.\n\t\t\t\t\t\t\tconsole.log('Content is cached for offline use.')\n\n\t\t\t\t\t\t\t// Execute callback\n\t\t\t\t\t\t\tif (config && config.onSuccess) {\n\t\t\t\t\t\t\t\tconfig.onSuccess(registration)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.catch((error) => {\n\t\t\tconsole.error('Error during service worker registration:', error)\n\t\t})\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n\t// Check if the service worker can be found. If it can't reload the page.\n\tfetch(swUrl, {\n\t\theaders: { 'Service-Worker': 'script' }\n\t})\n\t\t.then((response) => {\n\t\t\t// Ensure service worker exists, and that we really are getting a JS file.\n\t\t\tconst contentType = response.headers.get('content-type')\n\t\t\tif (\n\t\t\t\tresponse.status === 404 ||\n\t\t\t\t(contentType != null && contentType.indexOf('javascript') === -1)\n\t\t\t) {\n\t\t\t\t// No service worker found. Probably a different app. Reload the page.\n\t\t\t\tnavigator.serviceWorker.ready.then((registration) => {\n\t\t\t\t\tregistration.unregister().then(() => {\n\t\t\t\t\t\twindow.location.reload()\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\t// Service worker found. Proceed as normal.\n\t\t\t\tregisterValidSW(swUrl, config)\n\t\t\t}\n\t\t})\n\t\t.catch(() => {\n\t\t\tconsole.log(\n\t\t\t\t'No internet connection found. App is running in offline mode.'\n\t\t\t)\n\t\t})\n}\n\nexport function unregister() {\n\tif ('serviceWorker' in navigator) {\n\t\tnavigator.serviceWorker.ready\n\t\t\t.then((registration) => {\n\t\t\t\tregistration.unregister()\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error.message)\n\t\t\t})\n\t}\n}\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider, useSelector } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\n\nimport App from './pages/App'\nimport store, { persistor } from './redux/store'\n\nimport * as serviceWorker from './pwa/serviceWorker'\n\nimport './index.css'\nimport 'antd/dist/antd.css'\nimport { ConfigProvider } from 'antd'\nimport zhCN from 'antd/es/locale/zh_CN'\nimport enUS from 'antd/es/locale/en_US'\n\nconst lang: any = {\n\tzh: zhCN,\n\ten: enUS\n}\n\nconst Root: React.FC = () => {\n\tconst global = useSelector(({ global }: any) => global)\n\treturn (\n\t\t<ConfigProvider locale={lang[global.lang]}>\n\t\t\t<App />\n\t\t</ConfigProvider>\n\t)\n}\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<PersistGate loading={null} persistor={persistor}>\n\t\t\t<BrowserRouter basename=\"/react-admin\">\n\t\t\t\t<Root />\n\t\t\t</BrowserRouter>\n\t\t</PersistGate>\n\t</Provider>,\n\tdocument.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nexport const REQUEST = 'REQUEST'\n\nexport const LOGIN_SAGA = 'LOGIN_SAGA'\nexport const LOGIN_SUCCESS = 'LOGIN_SUCCESS'\nexport const LOGIN_FAILURE = 'LOGIN_FAILURE'\n\nexport const LOGOUT_SAGA = 'LOGOUT_SAGA'\nexport const LOGOUT_SUCCESS = 'LOGOUT_SUCCESS'\nexport const LOGOUT_FAILURE = 'LOGOUT_FAILURE'\n\nexport const SEND_CAPTCHA = 'SEND_CAPTCHA'\nexport const SEND_CAPTCHA_SUCCESS = 'SEND_CAPTCHA_SUCCESS'\nexport const SEND_CAPTCHA_FAILURE = 'SEND_CAPTCHA_FAILURE'\n\nexport const CLEAR_LOGIN_MESSAGE = 'CLEAR_LOGIN_MESSAGE'\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nexport const REQUEST = 'REQUEST'\n\nexport const QUERY_PRODUCT_SAGA = 'QUERY_PRODUCT_SAGA'\nexport const QUERY_PRODUCT_SUCCESS = 'QUERY_PRODUCT_SUCCESS'\nexport const QUERY_PRODUCT_FAILURE = 'QUERY_PRODUCT_FAILURE'\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\n\nimport { IRouteConfig } from '../routes'\n\nexport default function loginMiddleware() {\n\treturn (next: any) => (currentRoute: IRouteConfig) => {\n\t\tconst { isLogin } = useSelector(({ user }: any) => user)\n\t\tconst { login } = currentRoute\n\n\t\tif (login) {\n\t\t\tif (!isLogin)\n\t\t\t\treturn () => (\n\t\t\t\t\t<Redirect\n\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\tpathname: '/login',\n\t\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\t\tfrom: currentRoute.location && currentRoute.location.pathname\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t}\n\n\t\treturn next(currentRoute)\n\t}\n}\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport React from 'react'\nimport { useSelector } from 'react-redux'\nimport { Redirect } from 'react-router-dom'\n\nimport { IRouteConfig } from '../routes'\n\nexport default function authMiddleware() {\n\t// use this code will fix, but need change function name to useCheckAuth\n\t// const { userInfo } = useSelector(({ user }: any) => user)\n\n\treturn (next: any) => (currentRoute: IRouteConfig) => {\n\t\t// FIXME:\n\t\t// 1. set checkLogin before checkAuth\n\t\t// 2. const { userInfo } = useSelector(({ user }: any) => user) here\n\t\t// 3. checkLogin return <Redirect/>\n\t\t// 4. throw Rendered fewer hooks than expected. This may be caused by an accidental early return statement\n\t\tconst { userInfo } = useSelector(({ user }: any) => user)\n\t\tif (currentRoute.authority) {\n\t\t\tif (\n\t\t\t\tArray.isArray(currentRoute.authority) &&\n\t\t\t\t!currentRoute.authority.includes(userInfo.username)\n\t\t\t)\n\t\t\t\treturn () => (\n\t\t\t\t\t<Redirect\n\t\t\t\t\t\tto={{\n\t\t\t\t\t\t\tpathname: '/403'\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)\n\t\t}\n\t\treturn next(currentRoute)\n\t}\n}\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport { RouteComponentProps } from 'react-router-dom'\n\nimport loginMiddleware from './middlewares/loginMiddleware'\nimport authMiddleware from './middlewares/authMiddleware'\n\nimport { IRouteConfig } from './routes'\n\nconst checkSuccessComponent = (\n\tcurrentRoute: IRouteConfig\n):\n\t| React.ComponentType<RouteComponentProps<any>>\n\t| React.ComponentType<any>\n\t| undefined => currentRoute.component\n\nfunction applyRouteMiddleware(middlewares: Array<any>) {\n\treturn (currentRoute: IRouteConfig) => {\n\t\tconst middlewaresChain = middlewares.map((middleware) =>\n\t\t\tmiddleware(currentRoute)\n\t\t)\n\n\t\treturn compose(...middlewaresChain)(() =>\n\t\t\tcheckSuccessComponent(currentRoute)\n\t\t)(currentRoute)\n\t}\n}\n\nfunction compose(...funcs: Array<any>) {\n\tif (funcs.length === 0) return (arg: any) => arg\n\tif (funcs.length === 1) return funcs[0]\n\treturn funcs.reduce((a, b) => (...args: Array<any>) => a(b(...args)))\n}\n\nexport default function getCheckRouteComponent(currentRoute: IRouteConfig) {\n\treturn applyRouteMiddleware([authMiddleware, loginMiddleware])(currentRoute)\n}\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport React from 'react'\nimport { Button, Result } from 'antd'\n\nexport interface IErrorBoundaryProps {\n\terrorShow?: React.ReactNode\n}\n\nclass ErrorBoundary extends React.Component<IErrorBoundaryProps> {\n\tstate = { hasError: false }\n\n\tstatic getDerivedStateFromError(error: any) {\n\t\treturn { hasError: true }\n\t}\n\n\tcomponentDidCatch(error: any, errorInfo: any) {\n\t\tconsole.log('---------- catch component render error ----------')\n\t\tconsole.log(error)\n\t\tconsole.log(errorInfo)\n\t}\n\n\trender() {\n\t\tif (this.state.hasError) {\n\t\t\treturn this.props.errorShow ? (\n\t\t\t\tthis.props.errorShow\n\t\t\t) : (\n\t\t\t\t<Result\n\t\t\t\t\tstatus=\"error\"\n\t\t\t\t\ttitle=\"Uncatch Error\"\n\t\t\t\t\tsubTitle=\"Sorry, something went wrong.\"\n\t\t\t\t\textra={<Button type=\"primary\">Back Home</Button>}\n\t\t\t\t/>\n\t\t\t)\n\t\t}\n\n\t\treturn this.props.children\n\t}\n}\n\nexport default ErrorBoundary\n","/*\n * Author: ssy <286506460@qq.com>\n * Repository: https://github.com/web-dev-store/react-admin.git\n * License: MIT\n * react and antd4 template\n */\n\nimport React from 'react'\nimport { Route } from 'react-router-dom'\n\nimport { IRouteConfig } from './routes'\nimport getCheckRouteComponent from './getCheckRouteComponent'\nimport ErrorBoundary from '../components/ErrorBoundary'\n\nconst CheckRoute: React.FC<IRouteConfig> = (props) => {\n\tconst { component: Component, ...restProps } = props\n\tconst RouteComponent = getCheckRouteComponent(props)\n\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<Route\n\t\t\t\t{...restProps}\n\t\t\t\trender={(props) => <RouteComponent {...props} {...restProps} />}\n\t\t\t/>\n\t\t</ErrorBoundary>\n\t)\n}\n\nexport default CheckRoute\n"],"sourceRoot":""}